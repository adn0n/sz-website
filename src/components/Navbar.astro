<nav class="flex items-center justify-between px-3 md:px-10 py-2 md:py-4 absolute w-full z-50">
  <div class="flex items-center gap-2">
    <img
      src="./logo.png"
      alt="TraderSZ Logo"
      class="w-24 sm:w-full h-4 sm:h-12 object-cover brightness-0 invert"
    />
    <!-- <div class="text-lg md:text-3xl font-bold text-white font-morris">
      tradersz coin
    </div> -->
  </div>
  <div class="relative">
    <div
      class="relative flex bg-black/60 backdrop-blur-sm border border-white/10 p-1 md:p-1.5 rounded-full gap-1 md:gap-1.5"
      id="nav-container"
    >
      <!-- Navigation Items -->
      <a
        href="#about"
        class="nav-item relative z-10 px-2 md:px-4 py-1 md:py-2 text-xs md:text-sm rounded-full text-white/70 transition-all duration-300 text-center"
        >About</a
      >
      <button
        class="nav-item relative z-10 px-2 md:px-4 py-1 md:py-2 text-xs md:text-sm rounded-full text-white/70 transition-all duration-300 text-center"
        id="tokenomics-link">Tokenomics</button
      >

      <!-- Animated Background Slider -->
      <div
        class="slider absolute opacity-0 h-full bg-white rounded-full shadow-sm transition-all duration-300 ease-in-out"
      >
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const navItems = document.querySelectorAll(".nav-item");
    const slider = document.querySelector(".slider") as HTMLElement;
    const container = document.querySelector("#nav-container");

    function updateSliderPosition(element: HTMLElement) {
      const itemRect = element.getBoundingClientRect();
      const containerRect = container!.getBoundingClientRect();

      slider!.style.width = `${itemRect.width}px`;
      slider!.style.height = `${itemRect.height - 2}px`;
      slider!.style.left = `${itemRect.left - containerRect.left}px`;
      slider!.style.top = `${itemRect.top - containerRect.top}px`;
      slider!.style.opacity = "1";
    }

    navItems.forEach((item) => {
      (item as HTMLElement).addEventListener("mouseenter", () => {
        updateSliderPosition(item as HTMLElement);
        (item as HTMLElement).classList.add("text-black");
      });

      item.addEventListener("mouseleave", () => {
        slider!.style.opacity = "0";
        item.classList.remove("text-black");
      });
    });

    // Update scroll functionality for both About and Tokenomics
    const aboutLink = document.querySelector('a[href="#about"]');
    aboutLink?.addEventListener("click", (e) => {
      e.preventDefault();
      const aboutSection = document.querySelector('#about');
      if (aboutSection) {
        const navHeight = document.querySelector('nav')?.offsetHeight || 0;
        const topOffset = (aboutSection as HTMLElement).offsetTop - navHeight;
        window.scrollTo({
          top: topOffset,
          behavior: "smooth"
        });
      }
    });

    const tokenomicsLink = document.getElementById("tokenomics-link");
    tokenomicsLink?.addEventListener("click", (e) => {
      e.preventDefault();
      const tokenomicsSection = document.querySelector("#tokenomics");
      if (tokenomicsSection) {
        const navHeight = document.querySelector('nav')?.offsetHeight || 0;
        const topOffset = (tokenomicsSection as HTMLElement).offsetTop - navHeight;
        window.scrollTo({
          top: topOffset,
          behavior: "smooth"
        });
      }
    });
  });
</script>

<style>
  @font-face {
    font-family: "Morris";
    src: url("/fonts/morris.ttf") format("truetype");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
  }
  .slider {
    pointer-events: none;
    transition-property: opacity, width, left;
    margin: 1px 0;
  }

  .nav-item:hover {
    color: black !important;
  }
</style>
